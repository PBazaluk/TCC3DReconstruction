import numpy as np
import cv2 as cv
import glob
import os

image_dir = './imgs/'
image_out = './imgswd/'
image_files = glob.glob(os.path.join(image_dir, '*.jpg'))
image_out = glob.glob(os.path.join(image_out, '*.jpg'))

for file in image_files:
    img = cv.imread(file)
    gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)
    sift = cv.SIFT_create()
    kp = sift.detect(gray, None)
    img_with_keypoints = cv.drawKeypoints(gray, kp, img, flags=cv.DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS) 
    output_file = os.path.splitext(file)[0] + '_keypoints.jpg'
    novo_path = output_file.replace("imgs", "imgswd")
    cv.imwrite(novo_path, img_with_keypoints)
    kp, des = sift.detectAndCompute(gray, None)
    print(len(kp))
   